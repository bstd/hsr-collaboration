include ../../partials/header.jade

section
  h1.debug-restricted
    | Pers√∂nlicher Bereich
  // name and email readonly for 'user'
  md-content(layout='row', layout-wrap, class='md-padding')
    div(class='form-group')
      label
        | Name
      input(type='text', name='name', class='form-control', ng-model='user.name', readonly)
    div(class='form-group')
      label
        | E-Mail Adresse
      input(type='email', name='email', class='form-control', ng-model='user.email', readonly)

  md-content(layout='row', layout-wrap, class='md-padding')
    form(class='form', name='form', ng-submit='changePassword(form)', novalidate='')
      div(class='form-group')
        label
          | Aktuelles Passwort
        input(type='password', name='password', class='form-control', ng-model='user.oldPassword', mongoose-error='')

        p(class='help-block', ng-show='form.password.$error.mongoose')
          | {{ errors.other }}

      div(class='form-group')
          label
            | Neues Passwort
          input(type='password', name='newPassword', class='form-control', ng-model='user.newPassword', ng-minlength='3', required='')

          p(class='help-block', ng-show='(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)')
            | Passwort muss mindestens 3 Zeichen lang sein

      p(class='help-block')
        | {{ message }}

      md-button(type='submit', class='md-raised md-primary')
        | Speichern
